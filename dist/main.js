import{A as P,E as V,F as G,a as u,b,c as j,d as w,e as U,f as Y,g as H,h as Q}from"./chunk-46PZUN6K.js";import"./chunk-GSS6R5EH.js";import"./chunk-P2J6QHPB.js";var f={synth:window.speechSynthesis,body:document.body,typeText:document.getElementById("type-text"),typeText2:document.getElementById("type-text-2"),typeHeader:document.getElementById("type-header"),statsChart:document.getElementById("stats-chart"),abilitiesUnorderedList:document.getElementById("abilities-unordered-list"),abilitiesHeader:document.getElementById("abilities-header"),heldItemsUnorderedList:document.getElementById("held-items-unordered-list"),formsUnorderedList:document.getElementById("forms-unordered-list"),heldItemsHeader:document.getElementById("held-items-header"),formsHeader:document.getElementById("forms-header"),toastText:document.getElementById("toast-text"),textbox:document.getElementById("pokemon-textbox"),toast:document.getElementById("toast"),goButton:document.getElementById("go-button"),randomPokemonButton:document.getElementById("random-pokemon-button"),previousButton:document.getElementById("previous-button"),nextButton:document.getElementById("next-button"),recallButton:document.getElementById("recall-button"),readEntryButton:document.getElementById("read-entry-button"),clearButton:document.getElementById("clear-button"),cryButton:document.getElementById("cry-button")},Ke=f.synth,J=f.body,We=f.typeText,Xe=f.typeText2,je=f.typeHeader,Ye=f.statsChart,Qe=f.abilitiesUnorderedList,Je=f.abilitiesHeader,Ze=f.heldItemsUnorderedList,et=f.formsUnorderedList,tt=f.heldItemsHeader,ot=f.formsHeader,ke=f.toastText,nt=f.textbox,B=f.toast,st=f.goButton,it=f.randomPokemonButton,rt=f.previousButton,at=f.nextButton,ct=f.recallButton,lt=f.readEntryButton,dt=f.clearButton,ut=f.cryButton;function Z(e){let t=Array.from(e);return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(()=>{t.forEach((n,o)=>{typeof process>"u"&&console.log(`Element ${o}: ${n.id||n.tagName} with classes: ${n.className}`)})}):t.forEach((n,o)=>{typeof process>"u"&&console.log(`Element ${o}: ${n.id||n.tagName} with classes: ${n.className}`)}),t}function F(e,t){if(!Array.isArray(e)){typeof process>"u"&&console.warn("getElementVisibility: elements should be an array");return}typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(()=>{e.forEach((n,o)=>{n&&(t==="visible"?(n.classList.remove("hidden-element"),n.classList.add("visible-element")):t==="hidden"&&(n.classList.remove("visible-element"),n.classList.add("hidden-element")))})}):e.forEach((n,o)=>{n&&(t==="visible"?(n.classList.remove("hidden-element"),n.classList.add("visible-element")):t==="hidden"&&(n.classList.remove("visible-element"),n.classList.add("hidden-element")))})}function I(e){if(typeof process>"u"&&console.log(`\u{1F35E} [Toast] Displaying message: "${e}"`),!e||typeof e!="string"){typeof process>"u"&&console.warn("\u26A0\uFE0F [Toast] Invalid text provided:",e);return}ke.textContent=e,typeof process>"u"&&console.log("\u{1F4DD} [Toast] Text content set"),B.classList.remove("hidden"),B.classList.add("show"),typeof process>"u"&&console.log("\u2705 [Toast] Toast displayed"),setTimeout(()=>{typeof process>"u"&&console.log("\u23F0 [Toast] Auto-hiding toast after 3 seconds"),B.classList.remove("show"),setTimeout(()=>{B.classList.add("hidden"),typeof process>"u"&&console.log("\u{1F507} [Toast] Toast hidden completely")},300)},3e3)}function Ee(){let e=window.innerWidth,t=navigator.userAgent.toLowerCase();if(e<=768||/android|iphone|ipad|ipod|blackberry|windows phone/i.test(t)){if(e<=480)return"mobile";if(e<=768)return"tablet"}return"desktop"}function xe(e){let t=document.getElementById("header");if(t)switch(t.classList.remove("mobile-layout","tablet-layout","desktop-layout"),e){case"mobile":t.classList.add("mobile-layout");break;case"tablet":t.classList.add("tablet-layout");break;case"desktop":default:t.classList.add("desktop-layout");break}}function Te(){let e=()=>{let n=Ee();xe(n)};e();let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{e()},200)},{passive:!0}),typeof process>"u"&&console.log("DOM utilities module initialized")}typeof document<"u"&&document.addEventListener("DOMContentLoaded",Te);var d=window.speechSynthesis,te=.7,we=["https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/","https://pokemoncries.com/cries/","https://play.pokemonshowdown.com/audio/cries/"],Se=[".ogg",".mp3",".wav"],ee=!1;function k(){if(!ee)try{let e=new Audio;e.volume=0,e.preload="auto",e.src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfCCuFyvLGfC4GM2C57+WUQQ0LTaXU8dlzIwc2jdXz1XgqBTLAy+7dexELLXLG8+ONPQ0PVqXU8dtxIQU6gsOj1VB1jA==";let t=e.play();if(t!==void 0&&t.then(()=>{ee=!0,c()&&console.log("\u{1F4F1} [Mobile Audio] Audio context unlocked successfully")}).catch(()=>{c()&&console.log("\u{1F4F1} [Mobile Audio] Could not unlock audio context")}),window.speechSynthesis){let n=/Android/i.test(navigator.userAgent);try{if(n){c()&&console.log("\u{1F4F1} [Android Speech] Enhanced Android speech synthesis initialization"),[()=>{let s=new SpeechSynthesisUtterance("");s.volume=0,s.rate=1,s.pitch=1,d.speak(s),setTimeout(()=>d.cancel(),50)},()=>{let s=new SpeechSynthesisUtterance(" ");s.volume=0,s.rate=1,s.pitch=1,d.speak(s),setTimeout(()=>d.cancel(),50)},()=>{let s=new SpeechSynthesisUtterance("test");s.volume=0,s.rate=1,s.pitch=1,d.speak(s),setTimeout(()=>d.cancel(),100)}].forEach((s,r)=>{setTimeout(s,r*200)});let i=()=>{let s=d.getVoices();s.length===0?(c()&&console.log("\u{1F4F1} [Android Speech] No voices loaded, forcing reload attempt"),setTimeout(()=>{let r=new SpeechSynthesisUtterance("voice test");r.volume=0,r.rate=.1,d.speak(r),d.cancel(),setTimeout(()=>{let a=d.getVoices();c()&&console.log(`\u{1F4F1} [Android Speech] Voice reload result: ${a.length} voices`)},500)},300)):c()&&console.log(`\u{1F4F1} [Android Speech] Found ${s.length} voices on initialization`)};i(),setTimeout(i,500),setTimeout(i,1e3),setTimeout(i,2e3)}else{let o=new SpeechSynthesisUtterance("");o.volume=0,d.speak(o),d.cancel(),c()&&console.log("\u{1F4F1} [Mobile Speech] Speech synthesis initialized")}}catch(o){c()&&console.log("\u{1F4F1} [Mobile Speech] Could not initialize speech synthesis:",o)}}}catch(e){c()&&console.log("\u{1F4F1} [Mobile Audio] Error attempting to unlock audio context:",e)}}function oe(){try{let e=null;if(typeof window<"u"&&window.pokemon)e=window.pokemon,c()&&console.log("Using global pokemon object:",e);else{let t=document.getElementById("name-header"),n=document.getElementById("number-header"),o="",i="";if(t&&t.textContent&&(o=t.textContent.trim().toLowerCase(),o=o.replace(/[^\w\s-]/g,"").trim(),c()&&console.log("Extracted Pokemon name:",o)),n&&n.textContent){let s=n.textContent.match(/\d+/);s&&(i=parseInt(s[0]),c()&&console.log("Extracted Pokemon ID:",i))}if(c()&&console.log("Extracted Pokemon data from DOM:",{name:o,id:i}),!o||!i){console.error("Could not extract Pokemon data from DOM - Name:",t?.textContent,"Number:",n?.textContent),u("Cannot play cry: Pokemon data not found");return}e={name:o,id:i,cry:null}}Le(e)}catch(e){console.error("Error in playCurrentPokemonCry:",e),u("Error playing Pokemon cry")}}function Le(e){if(!e||!e.name&&!e.id){console.error("Invalid Pokemon data for cry playback"),u("Cannot play cry: Invalid Pokemon data");return}k();let t=document.getElementById("cry-button"),n=document.getElementById("cry-button-top");if(!t||!n){console.error("Cry button elements not found");return}let o=n.innerHTML;n.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i>',t.disabled=!0,t.classList.add("loading");function i(){n.innerHTML='<i class="fa-solid fa-volume-high"></i>',t.disabled=!1,t.classList.remove("loading")}try{if(!e.cry){c()&&console.log("No primary cry URL available, using alternative sources"),i(),C(e);return}let s=new Audio;s.addEventListener("error",a=>{console.error("Error loading Pok\xE9mon cry:",a),i(),C(e)}),s.addEventListener("loadstart",()=>{c()&&console.log("Loading Pok\xE9mon cry...")}),s.addEventListener("canplay",()=>{c()&&console.log("Pok\xE9mon cry ready to play"),i()}),s.addEventListener("ended",()=>{i()}),s.volume=te,s.preload="auto",s.crossOrigin="anonymous",s.src=e.cry;let r=s.play();r!==void 0&&r.then(()=>{console.log(`Playing ${e.name}'s cry`),u(`Playing ${G(e.name)}'s cry! \u{1F50A}`),n.innerHTML='<i class="fa-solid fa-play"></i>',t.classList.remove("loading")}).catch(a=>{console.error("Error playing Pok\xE9mon cry:",a),i(),a.name==="NotAllowedError"?/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(u("Tap the cry button again to enable audio on mobile"),k()):u("Please interact with the page first, then try again"):a.name==="NotSupportedError"?u("Audio format not supported by your browser"):(u("Failed to play Pok\xE9mon cry"),C(e))})}catch(s){console.error("Error creating audio for Pok\xE9mon cry:",s),n.innerHTML=o,t.disabled=!e.cry,t.classList.remove("loading"),u("Error loading Pok\xE9mon cry"),(e.name||e.id)&&C(e)}}function C(e){if(console.log("\u{1F504} [Alternative Cry] Starting fallback audio for:",e),!e||!e.id){console.error("\u274C [Alternative Cry] Invalid Pokemon data for alternative cry:",e);return}let t=document.getElementById("cry-button"),n=document.getElementById("cry-button-top");if(!t||!n){console.error("\u274C [Alternative Cry] Cry button elements not found in DOM");return}let o=[];we.forEach(r=>{Se.forEach(a=>{if(r.includes("pokemonshowdown")){let l=`${r}${e.name.toLowerCase()}${a}`;o.push(l),c()&&console.log(`\u{1F3B5} [Alternative Cry] Generated showdown URL: ${l}`)}else{let l=`${r}${e.id}${a}`;o.push(l),c()&&console.log(`\u{1F3B5} [Alternative Cry] Generated ID-based URL: ${l}`)}})}),c()&&console.log(`\u{1F3B5} [Alternative Cry] Generated ${o.length} alternative URLs`),u("Trying alternative audio sources...");let i=0;function s(){if(i>=o.length){console.error(`\u274C [Alternative Cry] All ${o.length} sources failed`),u("No working cry audio found for this Pok\xE9mon"),n.innerHTML='<i class="fa-solid fa-volume-xmark"></i>',t.disabled=!0,t.classList.add("cry-unavailable");return}let r=o[i];console.log(`\u{1F3B5} [Alternative Cry] Trying source ${i+1}/${o.length}: ${r}`);let a=new Audio;a.crossOrigin="anonymous",a.volume=te;let l=setTimeout(()=>{console.warn(`\u23F0 [Alternative Cry] Timeout for source ${i+1}: ${r}`),i++,s()},5e3);a.addEventListener("error",p=>{console.warn(`\u274C [Alternative Cry] Error with source ${i+1}: ${r}`,p),clearTimeout(l),i++,s()}),a.addEventListener("canplay",()=>{console.log(`\u2705 [Alternative Cry] Source ${i+1} ready: ${r}`),clearTimeout(l),a.play().then(()=>{console.log(`\u{1F50A} [Alternative Cry] Successfully playing ${e.name}'s cry from source ${i+1}`),u(`Playing ${G(e.name)}'s cry! \u{1F50A}`),n.innerHTML='<i class="fa-solid fa-play"></i>',t.disabled=!1,t.classList.remove("cry-unavailable"),a.addEventListener("ended",()=>{console.log(`\u{1F507} [Alternative Cry] Audio playback ended for ${e.name}`),n.innerHTML='<i class="fa-solid fa-volume-high"></i>'})}).catch(p=>{console.warn(`\u274C [Alternative Cry] Play error for source ${i+1}: ${r}`,p),i++,s()})}),a.src=r}s()}function ne(e,t,n){if(!e||!t||!n){console.warn("Missing required text for speech synthesis"),u("Cannot read entry: missing information");return}if(!Ae()){console.error("Speech synthesis not supported in this browser"),u("Text-to-speech not supported in this browser");return}k(),d.cancel();let o=/Android/i.test(navigator.userAgent);o&&(u("\u{1F916} Preparing Android text-to-speech..."),window.speechSynthesis&&window.speechSynthesis.getVoices().length===0&&(c()&&console.log("\u{1F4F1} [Android Speech] No voices immediately available, this may indicate TTS services are disabled"),u("\u26A0\uFE0F If speech doesn't work, enable Google Text-to-Speech in Settings \u2192 Accessibility \u2192 Text-to-speech output"),setTimeout(()=>{window.speechSynthesis.getVoices().length===0&&u("\u{1F4A1} Android TTS Setup: Settings \u2192 Apps \u2192 Google Text-to-Speech \u2192 Enable")},1e3)));try{if(o){c()&&console.log("\u{1F4F1} [Android Speech] Starting Android-specific speech initialization");for(let s=0;s<3;s++)setTimeout(()=>{let r=new SpeechSynthesisUtterance("");r.volume=0,r.rate=1,r.pitch=1,d.speak(r),setTimeout(()=>d.cancel(),10)},s*100)}new Promise(s=>{let r=d.getVoices();if(r.length>0)s(r);else{let a=()=>{r=d.getVoices(),r.length>0&&(d.removeEventListener("voiceschanged",a),s(r))};d.addEventListener("voiceschanged",a),setTimeout(()=>{d.removeEventListener("voiceschanged",a),r=d.getVoices(),r.length===0?(c()&&console.log("\u{1F4F1} [Android Speech] No voices found, forcing another attempt"),setTimeout(()=>{r=d.getVoices(),s(r)},500)):s(r)},o?2e3:1e3)}}).then(s=>{if(c()&&console.log(`\u{1F4F1} [Speech] Available voices: ${s.length}`),o){let r=`${e}. The ${t}. ${n}`,a=new SpeechSynthesisUtterance(r);if(a.rate=.7,a.pitch=1,a.volume=1,s.length>0){let l=s.find(p=>p.lang.startsWith("en")&&p.localService===!0)||s.find(p=>p.lang.startsWith("en")&&!p.name.toLowerCase().includes("network"))||s.find(p=>p.lang.startsWith("en"));l?(a.voice=l,c()&&console.log("\u{1F4F1} [Android Speech] Using voice:",l.name,"Local:",l.localService)):c()&&console.log("\u{1F4F1} [Android Speech] No English voice found, using default")}else c()&&console.log("\u{1F4F1} [Android Speech] No voices available, proceeding with default");a.addEventListener("start",()=>{c()&&console.log("\u{1F4F1} [Android Speech] Successfully started reading Pokemon entry"),u("\u{1F4E2} Reading Pok\xE9dex entry...")}),a.addEventListener("end",()=>{c()&&console.log("\u{1F4F1} [Android Speech] Successfully finished reading Pokemon entry"),u("\u2705 Finished reading entry")}),a.addEventListener("error",l=>{console.error("\u{1F4F1} [Android Speech] Speech synthesis error:",l),c()&&console.log("\u{1F4F1} [Android Speech] Error details:",{error:l.error,message:l.message,type:l.type}),l.error==="network"||l.error==="synthesis-failed"?(c()&&console.log("\u{1F4F1} [Android Speech] Network/synthesis error, attempting retry with different settings"),u("\u26A0\uFE0F Speech failed, trying again..."),setTimeout(()=>{let p=new SpeechSynthesisUtterance(r);p.rate=.6,p.pitch=1,p.volume=.9,p.voice=null,p.addEventListener("start",()=>{c()&&console.log("\u{1F4F1} [Android Speech] Retry successful"),u("\u{1F4E2} Reading Pok\xE9dex entry...")}),p.addEventListener("error",()=>{c()&&console.log("\u{1F4F1} [Android Speech] Retry also failed"),u('\u274C Text-to-speech unavailable. Try enabling "TalkBack" or "Select to Speak" in Android Accessibility settings, then try again.')}),d.speak(p)},1e3)):u('\u274C Text-to-speech failed. On Android, try enabling "TalkBack" or "Select to Speak" in Accessibility settings.')}),setTimeout(()=>{c()&&console.log("\u{1F4F1} [Android Speech] Attempting to start speech synthesis"),d.cancel(),setTimeout(()=>{c()&&console.log("\u{1F4F1} [Android Speech] Starting utterance"),d.speak(a),setTimeout(()=>{if(!d.speaking&&!d.pending){c()&&console.log("\u{1F4F1} [Android Speech] Speech did not start, attempting manual trigger"),u("\u{1F504} Initializing speech... Please wait.");let l=new SpeechSynthesisUtterance("Ready");l.volume=.1,l.rate=1,l.addEventListener("end",()=>{setTimeout(()=>{d.speak(a),setTimeout(()=>{!d.speaking&&!d.pending&&(c()&&console.log("\u{1F4F1} [Android Speech] All attempts failed"),u("\uFFFD Text-to-speech unavailable. Try: Settings \u2192 Accessibility \u2192 Text-to-speech \u2192 Install or update Google TTS"),setTimeout(()=>{window.speechSynthesis.getVoices().length===0?u("\u{1F6A8} No TTS voices found. Install Google Text-to-Speech from Play Store"):u("\u2699\uFE0F TTS voices found but not working. Check TTS settings or restart browser")},2e3))},1e3)},200)}),d.speak(l)}},500)},300)},400)}else{let r=new SpeechSynthesisUtterance(e),a=new SpeechSynthesisUtterance(`The ${t}`),l=new SpeechSynthesisUtterance(n);[r,a,l].forEach(p=>{if(p.rate=.9,p.pitch=1,p.volume=.8,s.length>0){let S=s.find(be=>be.lang.startsWith("en"));S&&(p.voice=S)}}),r.addEventListener("start",()=>{c()&&console.log("\u{1F4F1} [Speech] Starting to read Pokemon entry"),u("Reading Pokemon entry...")}),l.addEventListener("end",()=>{c()&&console.log("\u{1F4F1} [Speech] Finished reading Pokemon entry"),u("Finished reading entry")}),l.addEventListener("error",p=>{console.error("\u{1F4F1} [Speech] Speech synthesis error:",p),u("Error reading entry. Try tapping the button again.")}),c()&&console.log("\u{1F4F1} [Speech] Starting speech synthesis"),d.speak(r),d.speak(a),setTimeout(()=>{d.speak(l)},100)}})}catch(i){console.error("\u{1F4F1} [Speech] Error setting up speech synthesis:",i),u("Text-to-speech not available")}}function Ae(){if(!("speechSynthesis"in window))return c()&&console.log("\u{1F4F1} [Speech Check] speechSynthesis not available in window"),!1;try{if(!new SpeechSynthesisUtterance("test"))return c()&&console.log("\u{1F4F1} [Speech Check] Cannot create SpeechSynthesisUtterance"),!1;let t=window.speechSynthesis.getVoices();return c()&&console.log("\u{1F4F1} [Speech Check] Available voices:",t.length),t.length===0&&(c()&&console.log("\u{1F4F1} [Speech Check] No voices available immediately, will retry when needed"),/Android/i.test(navigator.userAgent))?(c()&&console.log("\u{1F4F1} [Android Speech Check] Android device detected - TTS may need manual activation"),!0):(c()&&console.log("\u{1F4F1} [Speech Check] Speech synthesis is supported"),!0)}catch(e){return c()&&console.log("\u{1F4F1} [Speech Check] Error testing speech synthesis:",e),!1}}function c(){return typeof process>"u"||!1}var x=1,se=151,E=1025,N="rgba(98, 98, 98, 0.95)",L="rgba(255, 111, 97, 0.95)";function ie(){g()&&console.log("\u{1F50D} [Device Detection] Starting device type detection...");let e=navigator.userAgent;g()&&console.log("\u{1F50D} [Device Detection] User agent:",e);let t=/(tablet|ipad|playbook|silk)|(android(?!.*mobi))|kindle|nook|gt-|sm-t|nexus (?=7|9|10)|xoom|sch-i800|playstation|nintendo|wiiu/i,n=/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)|Windows Phone/i,o=window.screen?window.screen.width:window.innerWidth,i=window.screen?window.screen.height:window.innerHeight,s=window.devicePixelRatio||1;if(g()&&console.log("\u{1F50D} [Device Detection] Screen dimensions:",{width:o,height:i,devicePixelRatio:s}),t.test(e))return g()&&console.log("\u{1F4F1} [Device Detection] Detected as TABLET via user agent"),"tablet";if(n.test(e))return g()&&console.log("\u{1F4F1} [Device Detection] Detected as MOBILE via user agent"),"mobile";let r=Math.max(o,i),a=Math.min(o,i),l=o/s,p=i/s;return g()&&console.log("\u{1F50D} [Device Detection] Fallback detection values:",{maxDimension:r,minDimension:a,effectiveWidth:l,effectiveHeight:p}),l<=480||r<=896&&a<=414?(g()&&console.log("\u{1F4F1} [Device Detection] Detected as MOBILE via screen size"),"mobile"):l<=1024||r<=1366&&a<=768?(g()&&console.log("\u{1F4F1} [Device Detection] Detected as TABLET via screen size"),"tablet"):(g()&&console.log("\u{1F5A5}\uFE0F [Device Detection] Detected as DESKTOP (default)"),"desktop")}function Pe(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}var _={mobile:{go:"<span id='go-button-top' class='button-top'><i class='fa-solid fa-search'></i></span>",random:"<span id='random-pokemon-button-top' class='button-top'><i class='fa-solid fa-shuffle'></i></span>",previous:"<span id='previous-button-top' class='button-top' title='Go to previous Pok\xE9mon'><i class='fa-solid fa-chevron-left'></i></span>",next:"<span id='next-button-top' class='button-top' title='Go to next Pok\xE9mon'><i class='fa-solid fa-chevron-right'></i></span>",readEntry:"<span id='read-entry-button-top' class='button-top' title='Read Pok\xE9dex entry aloud'><i class='fa-solid fa-book-open'></i></span>",clear:"<span id='clear-button-top' class='button-top' title='Clear all data and reset view'><i class='fa-solid fa-xmark'></i></span>",cry:"<span id='cry-button-top' class='button-top' title='Play Pok\xE9mon cry sound'><i class='fa-solid fa-volume-high'></i></span>",recall:"<span id='recall-button-top' class='button-top' title='Show last viewed Pok\xE9mon'><i class='fa-solid fa-history'></i></span>"},tablet:{go:"<span id='go-button-top' class='button-top'><i class='fa-solid fa-search'></i> Search</span>",random:"<span id='random-pokemon-button-top' class='button-top'><i class='fa-solid fa-shuffle'></i> Random</span>",previous:"<span id='previous-button-top' class='button-top' title='Go to previous Pok\xE9mon'><i class='fa-solid fa-chevron-left'></i></span>",next:"<span id='next-button-top' class='button-top' title='Go to next Pok\xE9mon'><i class='fa-solid fa-chevron-right'></i></span>",readEntry:"<span id='read-entry-button-top' class='button-top' title='Read Pok\xE9dex entry aloud'><i class='fa-solid fa-book-open'></i></span>",clear:"<span id='clear-button-top' class='button-top' title='Clear all data and reset view'><i class='fa-solid fa-xmark'></i></span>",cry:"<span id='cry-button-top' class='button-top' title='Play Pok\xE9mon cry sound'><i class='fa-solid fa-volume-high'></i></span>",recall:"<span id='recall-button-top' class='button-top' title='Show last viewed Pok\xE9mon'><i class='fa-solid fa-history'></i></span>"},desktop:{go:"<span id='go-button-top' class='button-top'><i class='fa-solid fa-search'></i> Search</span>",random:"<span id='random-pokemon-button-top' class='button-top'><i class='fa-solid fa-shuffle'></i> Random</span>",previous:"<span id='previous-button-top' class='button-top'><i class='fa-solid fa-chevron-left'></i></span>",next:"<span id='next-button-top' class='button-top'><i class='fa-solid fa-chevron-right'></i></span>",readEntry:"<span id='read-entry-button-top' class='button-top' title='Read Pok\xE9dex entry aloud'><i class='fa-solid fa-book-open'></i></span>",clear:"<span id='clear-button-top' class='button-top' title='Clear all data and reset view'><i class='fa-solid fa-xmark'></i></span>",cry:"<span id='cry-button-top' class='button-top' title='Play Pok\xE9mon cry sound'><i class='fa-solid fa-volume-high'></i></span>",recall:"<span id='recall-button-top' class='button-top' title='Show last viewed Pok\xE9mon'><i class='fa-solid fa-history'></i></span>"}};function re(e){g()&&console.log(`\u{1F3A8} [Responsive Layout] Applying layout for device type: ${e}`);let t=_[e]||_.desktop;_[e]||console.warn(`\u26A0\uFE0F [Responsive Layout] Unknown device type '${e}', using desktop template`);let n={go:document.getElementById("go-button-top"),random:document.getElementById("random-pokemon-button-top"),previous:document.getElementById("previous-button-top"),next:document.getElementById("next-button-top"),readEntry:document.getElementById("read-entry-button-top"),clear:document.getElementById("clear-button-top"),cry:document.getElementById("cry-button-top"),recall:document.getElementById("recall-button-top")};g()&&console.log("\u{1F50D} [Responsive Layout] Found button elements:",Object.entries(n).map(([r,a])=>`${r}: ${a?"found":"missing"}`).join(", "));let o=0;Object.keys(t).forEach(r=>{let a=n[r];if(a&&t[r]){let l=t[r].replace(/^<span[^>]*>|<\/span>$/g,""),p=a.innerHTML;a.innerHTML=l,g()&&console.log(`\u{1F504} [Responsive Layout] Updated ${r} button: "${p}" \u2192 "${l}"`),o++}else a||console.warn(`\u26A0\uFE0F [Responsive Layout] Button element '${r}' not found in DOM`)}),console.log(`\u2705 [Responsive Layout] Applied templates to ${o} buttons`);let i=document.body,s=Array.from(i.classList).filter(r=>r.startsWith("device-"));if(i.classList.remove("device-mobile","device-tablet","device-desktop"),i.classList.add(`device-${e}`),g()&&console.log(`\u{1F3A8} [Responsive Layout] Updated body classes: removed [${s.join(", ")}], added [device-${e}]`),Pe()){i.classList.add("touch-device"),g()&&console.log("\u{1F446} [Responsive Layout] Touch device detected, adding touch optimizations");let r=document.querySelectorAll("button, .button");r.forEach(a=>{a.classList.add("touch-optimized")}),g()&&console.log(`\u{1F446} [Responsive Layout] Applied touch optimization to ${r.length} buttons`)}else g()&&console.log("\u{1F5B1}\uFE0F [Responsive Layout] Non-touch device, skipping touch optimizations");console.log(`\u2705 [Responsive Layout] Successfully applied responsive layout for: ${e}`)}function R(e,t="visible",n=!1){console.log(`\u{1F50D} [Generate Pokemon] Request for: ${e}, visibility: ${t}, skipValidation: ${n}`);let o=document.getElementById("pokemon-textbox");console.log(`\u{1F50D} [Generate Pokemon] Textbox element: ${o?"found":"not found"}`);try{if(typeof e=="string"&&isNaN(parseInt(e,10))){console.log(`\u{1F524} [Generate Pokemon] String input detected: "${e}", treating as Pokemon name`);let s=Q(e);if(s===""){console.warn(`\u26A0\uFE0F [Generate Pokemon] Empty or invalid string provided: "${e}"`),u("Please enter a valid Pok\xE9mon name or ID"),o&&(o.style.color=L);return}console.log(`\u2705 [Generate Pokemon] Requesting Pokemon by name: "${s}" (normalized from "${e}")`),P(s,t),o&&(o.style.color=N,console.log("\u{1F3A8} [Generate Pokemon] Set textbox color to success state for name search"));return}let i=typeof e=="string"?parseInt(e,10):e;if(console.log(`\u{1F522} [Generate Pokemon] Numeric ID: ${i} (type: ${typeof i})`),isNaN(i)){console.error(`\u274C [Generate Pokemon] Invalid input provided: ${e} \u2192 ${i} (NaN)`),u("Please enter a valid Pok\xE9mon name or ID"),o&&(o.style.color=L);return}if(n){console.log("\u23ED\uFE0F [Generate Pokemon] Skipping validation, requesting Pokemon data directly"),P(i,t),o&&(o.style.color=N,console.log("\u{1F3A8} [Generate Pokemon] Set textbox color to success state"));return}else if(console.log(`\u2705 [Generate Pokemon] Performing ID validation (range: ${x}-${E})`),i>=x&&i<=E){console.log(`\u2705 [Generate Pokemon] ID ${i} is within valid range, requesting Pokemon data`),P(i,t),o&&(o.style.color=N,console.log("\u{1F3A8} [Generate Pokemon] Reset textbox color to success state"));return}else{console.warn(`\u26A0\uFE0F [Generate Pokemon] ID ${i} is out of bounds (${x}-${E})`),u(`Please enter a number between ${x} and ${E} or a Pok\xE9mon name`),o&&(o.style.color=L,console.log("\u{1F3A8} [Generate Pokemon] Set textbox color to error state"));return}}catch(i){console.error("\u274C [Generate Pokemon] Error in generatePokemon:",i),u("Error loading Pokemon data"),o&&(o.style.color=L,console.log("\u{1F3A8} [Generate Pokemon] Set textbox color to error state due to exception"))}}function ae(){let e=E-x+1;return Math.floor(Math.random()*e)+x}function $(e){if(!e)return console.warn("validatePokedexNumber: No textbox element provided"),!1;let t=parseInt(e.value,10),n=!isNaN(t)&&t>=x&&t<=E;return e.style.color=n?N:L,n}function g(){return typeof process>"u"||!1}var ce=["Try: pikachu, charizard, or 25...","Try: eevee, lucario, or 150...","Try: garchomp, mewtwo, or 1...","Try: gengar, dragonite, or 144...","Try: alakazam, gyarados, or 6..."];function le(e,t=3e3){if(!e)return;let n=0,o=()=>{document.activeElement!==e&&e.value===""&&(e.placeholder=ce[n],n=(n+1)%ce.length)};o();let i=setInterval(o,t);return e.addEventListener("focus",()=>{e.placeholder="Enter Pok\xE9mon name or ID..."}),e.addEventListener("blur",()=>{e.value===""&&setTimeout(o,500)}),i}var y=!1;function Be(e,t=300){let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>e(...o),t)}}var m=document.getElementById("pokemon-textbox"),q=document.getElementById("go-button"),Ie=document.getElementById("go-button-top"),pe=document.getElementById("random-pokemon-button"),Ce=document.getElementById("random-pokemon-button-top"),me=document.getElementById("previous-button"),Ne=document.getElementById("previous-button-top"),fe=document.getElementById("next-button"),Re=document.getElementById("next-button-top"),D=document.getElementById("cry-button"),$e=document.getElementById("cry-button-top"),O=document.getElementById("read-entry-button"),A=document.getElementById("read-entry-button-top"),ge=document.getElementById("recall-button"),De=document.getElementById("recall-button-top"),K=document.getElementById("clear-button"),Oe=document.getElementById("clear-button-top"),W=document.getElementById("toast"),ye=document.getElementById("toast-close-button"),v=document.getElementById("number-header"),Me=document.getElementById("name-header"),Ue=document.getElementById("pokedex-entry-text"),He=document.getElementById("genus-sub-header"),Mt=document.getElementById("stats-chart"),Ut=document.getElementById("artwork-table"),M=Z(document.getElementsByClassName("hidden-element")),he=document.getElementById("type-text"),ve=document.getElementById("type-text-2"),T=null,z=null;(()=>{F(M,"hidden"),de(),qe(),ze(),q.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Go button clicked"),h("Go",!0,!0)}),pe.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Random button clicked"),h("Random",!0,!0)}),me.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Previous button clicked"),h("Previous",!0,!0)}),fe.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Next button clicked"),h("Next",!0,!0)}),ge.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Recall button clicked"),h("Recall",!0,!0)}),D.addEventListener("click",t=>{y&&console.log("\u{1F518} [Button Click] Cry button clicked"),t.preventDefault(),h("Cry",!0,!1)}),D.addEventListener("touchstart",t=>{y&&console.log("\u{1F518} [Touch Start] Cry button touched")},{passive:!0}),D.addEventListener("touchend",t=>{y&&console.log("\u{1F518} [Touch End] Cry button touch ended"),t.preventDefault(),h("Cry",!0,!1)}),O.addEventListener("click",t=>{y&&console.log("\u{1F518} [Button Click] Read Entry button clicked"),t.preventDefault(),h("ReadEntry",!1,!1)}),O.addEventListener("touchstart",t=>{y&&console.log("\u{1F518} [Touch Start] Read Entry button touched")},{passive:!0}),O.addEventListener("touchend",t=>{y&&console.log("\u{1F518} [Touch End] Read Entry button touch ended"),t.preventDefault(),h("ReadEntry",!1,!1)}),K.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Clear button clicked"),h("Clear",!0,!1)}),he.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Type badge 1 clicked"),h("TypeText",!0,!1)}),ve.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Type badge 2 clicked"),h("TypeText2",!0,!1)}),ye.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Toast close button clicked"),h("ToastClose",!0,!1)}),W.addEventListener("click",()=>{y&&console.log("\u{1F518} [Button Click] Toast notification clicked"),h("Toast",!0,!1)}),m.addEventListener("input",Be(Ve,300)),m.addEventListener("focus",Ge),m.addEventListener("blur",Fe),m.addEventListener("keydown",_e);let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{de()},250)}),m.focus(),le(m,4e3)})();function Ve(){let e=m.value.trim();/^\d+$/.test(e)?$(m):m.style.color="rgba(98, 98, 98, 0.95)"}function Ge(){m.value="",$(m)}function Fe(){m.value===""&&(m.value=z,$(m))}function _e(e){e.key==="Enter"&&(e.preventDefault(),q.click())}function de(){if(T=ie(),w("deviceType",T),re(T),window.deviceType=T,H().catch(e=>{console.log("IP address fetch failed:",e.message)}),T==="mobile"){console.log("\u{1F4F1} [Mobile] Preparing audio context and speech synthesis for mobile device"),document.addEventListener("touchstart",k,{once:!0,passive:!0}),document.addEventListener("click",k,{once:!0});let e=/Android/i.test(navigator.userAgent);if(e){console.log("\u{1F4F1} [Android] Detected Android device, applying enhanced speech synthesis initialization");let t=()=>{if(window.speechSynthesis){console.log("\u{1F4F1} [Android] User interaction detected, initializing speech synthesis");let o=new SpeechSynthesisUtterance("ready");o.volume=0,o.rate=1,o.pitch=1,o.addEventListener("start",()=>{console.log("\u{1F4F1} [Android] Speech synthesis successfully activated")}),o.addEventListener("error",i=>{console.log("\u{1F4F1} [Android] Speech synthesis activation failed:",i)}),window.speechSynthesis.speak(o),setTimeout(()=>window.speechSynthesis.cancel(),100),setTimeout(()=>{let i=window.speechSynthesis.getVoices();console.log(`\u{1F4F1} [Android] Post-activation voices available: ${i.length}`)},500)}};document.addEventListener("touchstart",t,{once:!0,passive:!0}),document.addEventListener("touchend",t,{once:!0}),document.addEventListener("click",t,{once:!0});let n=document.getElementById("read-entry-button");n&&n.addEventListener("click",()=>{console.log("\u{1F4F1} [Android] Speech button clicked, ensuring TTS is ready"),k(),t(),setTimeout(()=>{if(window.speechSynthesis){let o=window.speechSynthesis.getVoices();if(console.log(`\u{1F4F1} [Android] Voices available for speech: ${o.length}`),o.length===0){console.log("\u{1F4F1} [Android] No voices found, attempting to force load");let i=new SpeechSynthesisUtterance(" ");i.volume=0,window.speechSynthesis.speak(i),setTimeout(()=>{window.speechSynthesis.cancel();let s=window.speechSynthesis.getVoices();console.log(`\u{1F4F1} [Android] After force load: ${s.length} voices`)},100)}}},200)})}window.speechSynthesis&&(window.speechSynthesis.addEventListener("voiceschanged",()=>{let t=window.speechSynthesis.getVoices();console.log(`\u{1F4F1} [Mobile Speech] Loaded ${t.length} voices for speech synthesis`),e&&t.length>0&&(console.log("\u{1F4F1} [Android Speech] Available voices:"),t.forEach((n,o)=>{console.log(`  ${o+1}. ${n.name} (${n.lang}) - Local: ${n.localService}`)}))}),window.speechSynthesis.getVoices())}window.pokemonApp||(window.pokemonApp={}),window.pokemonApp.deviceType=T,window.pokemonApp.getStoredIP=Y,window.pokemonApp.refreshUserIP=H}function ze(){let e=U(b.CURRENT_POKEMON);e&&(z=e,R(z,"visible",!1))}function qe(){if(localStorage.getItem("currentPok\xE9mon")===localStorage.getItem("lastPok\xE9mon")&&localStorage.removeItem("lastPok\xE9mon"),"originalPok\xE9dex"in localStorage&&localStorage.getItem("originalPok\xE9dex")==="true"){localStorage.setItem("originalPok\xE9dex",!0),localStorage.setItem("maximumId",se);return}else{localStorage.setItem("originalPok\xE9dex",!1),localStorage.setItem("maximumId",E);return}}function h(e,t,n){console.log(`\u{1F504} [Button Handler] Processing: ${e}, cancelSynth: ${t}, callGenerate: ${n}`);let o;switch(t&&(console.log("\u{1F507} [Button Handler] Canceling speech synthesis"),d.cancel()),e){case"Go":case"Enter":if(K.style.display!=="none"){let l=v.innerText?v.innerText.substring(1):null,p=m.value;l&&l!==p&&w(b.LAST_POKEMON,l)}o=m.value;break;case"Random":let i=v.innerText?v.innerText.substring(1):m.value;i&&i!==""&&w(b.LAST_POKEMON,i),o=ae(),m.value=o;break;case"Previous":let s=v.innerText?v.innerText.substring(1):m.value;s&&s!==""&&w(b.LAST_POKEMON,s),o=(parseInt(v.innerText.substring(1))-1).toString(),m.value=o;break;case"Next":let r=v.innerText?v.innerText.substring(1):m.value;r&&r!==""&&w(b.LAST_POKEMON,r),o=(parseInt(v.innerText.substring(1))+1).toString(),m.value=o;break;case"Recall":let a=j();if(a)o=a,m.value=o,R(o,"visible",!0);else{I("No different Pok\xE9mon available to recall.");return}break;case"Cry":oe();break;case"ReadEntry":if(d.speaking)d.cancel(),I("\u{1F507} Stopped reading entry"),A.innerHTML='<i class="fa-solid fa-book-open"></i>';else{A.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i>';let l=Me.textContent,p=He.textContent,S=Ue.textContent;!l||!p||!S?(I("\u274C No Pok\xE9mon data available to read"),A.innerHTML='<i class="fa-solid fa-book-open"></i>'):(ne(l,p,S),setTimeout(()=>{A.innerHTML='<i class="fa-solid fa-book-open"></i>'},2e3))}break;case"Clear":m.value="",J.style.setProperty("--body-bg","linear-gradient(135deg, #f8fafc 0%, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%, #f8fafc 100%)"),o=null,ye.click(),console.log("Clearing elements, HiddenElementsArray length:",M.length),F(M,"hidden"),localStorage.removeItem(b.CURRENT_POKEMON),localStorage.removeItem(b.LAST_POKEMON),localStorage.removeItem("id");break;case"TypeText":V(he.innerText);break;case"TypeText2":V(ve.innerText);break;case"ToastClose":case"Toast":m.focus();break}n&&R(o,"visible",!1),W.classList.remove("toast-active")}var ue=!1,X=()=>{ue||(console.log("\u{1F4F1} [First Interaction] Unlocking audio context for mobile"),k(),ue=!0)};document.addEventListener("click",X,{once:!0});document.addEventListener("touchstart",X,{once:!0,passive:!0});document.addEventListener("keydown",X,{once:!0});window.pokemonApp={HiddenElementsArray:M,Textbox:m,Toast:W,GoButton:q,GoButtonTop:Ie,RandomPokemonButton:pe,RandomPokemonButtonTop:Ce,PreviousButton:me,PreviousButtonTop:Ne,NextButton:fe,NextButtonTop:Re,ReadEntryButton:O,ReadEntryButtonTop:A,RecallButton:ge,RecallButtonTop:De,ClearButton:K,ClearButtonTop:Oe,CryButton:D,CryButtonTop:$e,deviceType:T};
